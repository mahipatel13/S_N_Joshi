<!DOCTYPE html>
<html lang="en">
<head>
    <title>Razorpay Payment</title>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
</head>
<body>
    <h2>Pay Now</h2>
    <button id="pay-btn">Pay â‚¹5</button>

    <script>
        document.getElementById("pay-btn").onclick = async function () {
            const response = await fetch("/create_order", { method: "POST", body: JSON.stringify({amount: 500}), headers: { "Content-Type": "application/json" } });
            const order = await response.json();

            var options = {
                "key": "{{ key }}",
                "amount": order.amount,
                "currency": "INR",
                "name": "Test Payment",
                "description": "Payment for Order",
                "order_id": order.id,
                "handler": async function (response) {
                    const verify = await fetch("/verify_payment", {
                        method: "POST",
                        body: JSON.stringify(response),
                        headers: { "Content-Type": "application/json" }
                    });
                    const result = await verify.json();
                    alert(result.message);
                }
            };

            var rzp = new Razorpay(options);
            rzp.open();
        };
    </script>
</body>
</html>
